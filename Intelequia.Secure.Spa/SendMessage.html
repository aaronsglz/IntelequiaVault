[JavaScript:{ jsname: "JQuery" }]
[JavaScript:{ jsname: "Knockout" }]
[JavaScript:{ path: "~/Resources/Shared/scripts/dnn.jquery.js"}]
[JavaScript:{ path: "~/DesktopModules/Intelequia/Secure/ClientScripts/knockout.validation.min.js"}]
[JavaScript:{ path: "~/DesktopModules/Intelequia/Secure/ClientScripts/SendMessage.js"}]
[JavaScript:{ path: "~/DesktopModules/Intelequia/Secure/ClientScripts/Common.js"}]
[JavaScript:{ path: "~/DesktopModules/Intelequia/Secure/ClientScripts/Trumbowyg/trumbowyg.min.js"}]
[JavaScript:{ path: "~/DesktopModules/Intelequia/Secure/ClientScripts/Trumbowyg/trumbowyg.base64.min.js"}]
[JavaScript:{ path: "~/DesktopModules/Intelequia/Secure/ClientScripts/Trumbowyg/trumbowyg.colors.min.js"}]
[Css:{ path: "~/DesktopModules/Intelequia/Secure/Css/Trumbowyg/trumbowyg.min.css"}]
[Css:{ path: "~/DesktopModules/Intelequia/Secure/Css/Trumbowyg/colors/trumbowyg.colors.min.css"}]
[Css:{ path: "~/DesktopModules/Intelequia/Secure/Css/font-awesome.min.css"}]
[Css:{ path: "~/DesktopModules/Intelequia/Secure/Css/module.css"}]

<div id="iss_IntelequiaSecure_SendMessage_[ModuleContext:ModuleId]" class="container-fluid">
    <div class="heading">
        <h3 class="title">
            <span class="icon">
                <em class="fa fa-paper-plane"></em>
            </span>
            <span>[Resx:{key:"SendMessageTittle"}]</span>
        </h3>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <label>[Resx:{key:"To"}]</label>
                <input type="text" class="form-control required" placeholder="[Resx:{key:'To.Help'}]" data-bind="value: messageTo, validationElement: messageTo" />
                <div data-bind="validationMessage: messageTo" class="text-alert text-danger" style="display: none;">
                    <span data-bind="validationMessage: messageTo"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"Co"}]</label>
                <input type="text" class="form-control" placeholder="[Resx:{key:'Co.Help'}]" data-bind="value: messageCc, validationElement: messageCc" />
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"Cco"}]</label>
                <input type="text" class="form-control" placeholder="[Resx:{key:'Cco.Help'}]" data-bind="value: messageCco, validationElement: messageCco" />
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"Subject"}]</label>
                <input type="text" class="form-control required" placeholder="[Resx:{key:'Subject.Help'}]" data-bind="value: subject, validationElement: subject" />
                <div data-bind="validationMessage: subject" class="text-alert text-danger" style="display: none;">
                    <span data-bind="validationMessage: subject"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"Head"}]</label>
                <div class="editor-wrapper">
                    <div id="MessageHeadEditor"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"Body"}]</label>
                <div class="message-body">
                    <div data-bind="html: body"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"Foot"}]</label>
                <div class="editor-wrapper">
                    <div id="MessageFootEditor"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label>[Resx:{key:"ExpireDate"}]</label>
                <div class="expire-date-group">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="input-group">
                                <input type="date" class="form-control" title="[Resx:{key:'ExpireDate.Help'}]" data-bind="value: date, validationElement: date" />
                                <span class="btn btn-primary">
                                    <em class="fa fa-calendar-o"></em>
                                </span>
                            </div>
                            <div data-bind="validationMessage: date" class="text-alert text-danger" style="display: none;">
                                <span data-bind="validationMessage: date"></span>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="input-group">
                                <input type="time" class="form-control" title="[Resx:{key:'ExpireDate.Help'}]" data-bind="value: hour" />
                                <span class="btn btn-primary">
                                    <em class="fa fa-clock-o"></em>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="action-buttons text-right">
        <div data-bind="visible: actionsVisible">
            <a href="#" class="btn btn-icon" data-bind="click: sendMessage">
                <em class="fa fa-paper-plane"></em> [Resx:{key:"Send"}]
            </a>
            <a href="#" class="btn btn-icon btn-secondary" data-bind="click: deleteMessageConfirm">
                <em class="fa fa-times"></em>[Resx:{key:"Discard"}]
            </a>
        </div>
    </div>
    <!-- ko if: cancelMessageVisible -->
    <div class="delete-resource">
        <div class="alert alert-warning text-left">
            <p>[Resx:{key:"ConfirmCancelMessage"}]</p>
            <br />
            <div class="text-right">
                <a href="#" class="btn btn-icon" data-bind="click: deleteMessage">[Resx:{key:"Yes"}]</a>
                <a href="#" class="btn btn-icon btn-secondary" data-bind="click: cancelMessageCancel">[Resx:{key:"No"}]</a>
            </div>
        </div>
    </div>
    <!-- /ko -->
</div>

<script language="javascript" type="text/javascript">
    jQuery(function ($) {
        var moduleId = parseInt("[ModuleContext:ModuleId]");

        var localizedSettings = {
            RequiredSubject: "[Resx:{key:'RequiredSubject'}]",
            RequiredDate: "[Resx:{key:'RequiredDate'}]",
            EmailsNotValid: "[Resx:{key:'EmailsNotValid'}]",
            MessageSent: "[Resx:{key:'MessageSent'}]",
            MessageNotSent: "[Resx:{key:'MessageNotSent'}]",
            RequiredMessageTo: "[Resx:{key:'RequiredMessageTo'}]",
            ConfirmCancelMessage: "[Resx:{key:'ConfirmCancelMessage'}]",
            Yes: "[Resx:{key:'Yes'}]",
            No: "[Resx:{key:'No'}]",
            MessageNotCancel: "[Resx:{key: 'MessageNotCancel.Text'}]",
            DateError: "[Resx:{key: 'DateError.Text'}]"
        };

        var editorOptions = {
            closable: false,
            mobile: true,
            tablet: true,
            fullscreenable: false,
            semantic: true,
            removeformatPasted: true,
            autogrow: true,
            btnsDef: {
                // Customizable dropdowns
                image: {
                    dropdown: ['insertImage', 'base64'],
                    ico: 'insertImage'
                }
            },
            btns: ['viewHTML',
                '|', 'formatting',
                '|', 'btnGrp-design',
                '|', 'link',
                '|', 'image',
                '|', 'btnGrp-justify',
                '|', 'btnGrp-lists',
                '|', 'horizontalRule',
                '|', 'foreColor', 'backColor',
                '|', 'removeformat']
        };

        var viewmodel = new intelequiaSecure.SendMessageViewModel(moduleId, localizedSettings);
        viewmodel.init(editorOptions);

        ko.applyBindings(viewmodel, $("#SendMessage-" + moduleId)[0]);
    });
</script>